**Claim.** The smallest real constant $c$ such that $f(n)\le cn$ for all bonza functions $f:\mathbb N\to\mathbb N$ and all $n\in\mathbb N$ is $c=4$.

**Proof.** A function $f$ is bonza if
$$
\forall a,b\in\mathbb N:\quad f(a)\mid b^{a}-f(b)^{f(a)}.\tag{1}
$$
We derive a sequence of consequences.

1) $f(1)=1$. Indeed, taking $(a,b)=(1,1)$ in (1) gives $f(1)\mid 1-f(1)^{f(1)}$. Reducing modulo $f(1)$ shows $0\equiv 1\pmod{f(1)}$, hence $f(1)=1$.

2) For all $a\in\mathbb N$, $f(a)\mid a^{a}$. This follows from (1) with $b=a$, since $f(a)\mid f(a)^{f(a)}$.

3) If a prime $r$ divides $f(a)$ for some $a$, then $r\mid f(r)$. Indeed, setting $b=r$ in (1) yields $f(a)\mid r^{a}-f(r)^{f(a)}$, whence $0\equiv -f(r)^{f(a)}\pmod r$ and so $r\mid f(r)$.

4) If an odd prime $p$ satisfies $p\mid f(p)$, then for all $b\in\mathbb N$ one has
$$
 b\equiv f(b)\pmod p.\tag{2}
$$
Proof: By 2), $f(p)\mid p^{p}$, so $f(p)=p^{s}$ for some $s\ge 1$. From (1) with $a=p$ we get $p^{s}\mid b^{p}-f(b)^{p^{s}}$, hence $b^{p}\equiv f(b)^{p^{s}}\pmod p$. Over $\mathbb Z/p\mathbb Z$, the Frobenius map $x\mapsto x^{p}$ is the identity; therefore $b\equiv f(b)^{p^{s-1}}\equiv f(b)\pmod p$, proving (2).

Let $\mathcal P_{\mathrm{odd}}=\{\text{odd primes }p: p\mid f(p)\}$. We split into cases.

– Case I: $\mathcal P_{\mathrm{odd}}$ is infinite. Fix $b\in\mathbb N$. By (2), $b\equiv f(b)\pmod p$ for all $p\in\mathcal P_{\mathrm{odd}}$, so $b-f(b)$ is divisible by infinitely many primes. Hence $b=f(b)$ for all $b$, i.e. $f=\mathrm{id}$, and thus $f(n)\le n$ for all $n$.

– Case II: $\mathcal P_{\mathrm{odd}}$ is finite. Let $L=\prod_{p\in\mathcal P_{\mathrm{odd}}} p$ (with $L=1$ if $\mathcal P_{\mathrm{odd}}=\emptyset$). Suppose $\mathcal P_{\mathrm{odd}}\ne\emptyset$. Choose $b$ such that $b\equiv 2\pmod L$ and $b\equiv 1\pmod 2$ (Chinese remainder theorem). Then (2) gives $f(b)\equiv 2\pmod p$ for all $p\in\mathcal P_{\mathrm{odd}}$, so no $p\in\mathcal P_{\mathrm{odd}}$ divides $f(b)$. If $f(b)>1$ and $r$ is an odd prime dividing $f(b)$, then by 3) we have $r\mid f(r)$, so $r\in\mathcal P_{\mathrm{odd}}$, contradiction. Thus $f(b)$ is a power of $2$. But $b$ is odd and by 2) $f(b)\mid b^{b}$, so $f(b)$ is odd, hence $f(b)=1$, contradicting $f(b)\equiv 2\pmod p$ for $p\in\mathcal P_{\mathrm{odd}}$. Therefore $\mathcal P_{\mathrm{odd}}=\emptyset$.

Consequences of $\mathcal P_{\mathrm{odd}}=\emptyset$:

5) For every odd prime $p$, $p\nmid f(p)$, and since $f(p)\mid p^{p}$, it follows that $f(p)=1$ for all odd primes $p$.

6) For all $n\in\mathbb N$, $f(n)$ is a power of $2$, and if $n$ is odd then $f(n)=1$. Indeed, if an odd prime $r$ divided some $f(n)$, then 3) would give $r\mid f(r)=1$, impossible. For odd $n$, 2) shows $f(n)\mid n^{n}$, which is odd, so together with the previous sentence this forces $f(n)=1$.

7) 2-adic bound for even inputs. Let $m$ be even and write $f(m)=2^{e(m)}$. Using (1) with $a=m$ and $b=3$ (note $f(3)=1$ by 5)), we get $2^{e(m)}\mid 3^{m}-1$. Write $m=2^{t}u$ with $u$ odd and $t=\nu_{2}(m)\ge 1$. The standard identity for odd $x$ and even $n$,
$$
\nu_{2}(x^{n}-1)=\nu_{2}(x-1)+\nu_{2}(x+1)+\nu_{2}(n)-1,
$$
applied to $x=3$, $n=m$, yields
$$
\nu_{2}(3^{m}-1)=\nu_{2}(3-1)+\nu_{2}(3+1)+\nu_{2}(m)-1=1+2+t-1=t+2.
$$
Hence $e(m)\le t+2=\nu_{2}(m)+2$, so for even $m$,
$$
 f(m)=2^{e(m)}\le 2^{\nu_{2}(m)+2}=4\cdot 2^{\nu_{2}(m)}\le 4m.
$$
Combining with 6), we obtain $f(n)\le 4n$ for all $n$.

It remains to show that $c=4$ is sharp. Define $f_{\max}:\mathbb N\to\mathbb N$ by
- $f_{\max}(1)=1$;
- $f_{\max}(n)=1$ for odd $n>1$;
- $f_{\max}(2)=4$;
- for even $n\ge 4$, $f_{\max}(n)=2^{\nu_{2}(n)+2}$.
We verify that $f_{\max}$ is bonza.
- If $a$ is odd, then $f_{\max}(a)=1$ and (1) is immediate.
- If $a=2$, then for any $b$: if $b$ is odd, $b^{2}\equiv 1\pmod 8$ and $f_{\max}(b)^{4}=1$, so $4\mid b^{2}-f_{\max}(b)^{4}$; if $b$ is even, both $b^{2}$ and $f_{\max}(b)^{4}$ are multiples of $4$, hence $4\mid b^{2}-f_{\max}(b)^{4}$.
- If $a\ge 4$ is even, let $s=\nu_{2}(a)+2$, so $f_{\max}(a)=2^{s}$. For odd $b$, the 2-adic identity above gives
$$
\nu_{2}(b^{a}-1)=\nu_{2}(b-1)+\nu_{2}(b+1)+\nu_{2}(a)-1\ge 2+1+\nu_{2}(a)-1=\nu_{2}(a)+2=s,
$$
so $2^{s}\mid b^{a}-1=f_{\max}(b)^{2^{s}}-b^{a}$. For even $b$, writing $t=\nu_{2}(b)\ge 1$, we have $\nu_{2}(b^{a})=a\,t\ge a\ge s$, while $\nu_{2}(f_{\max}(b)^{2^{s}})=(t+2)2^{s}>s$, hence $\nu_{2}(b^{a}-f_{\max}(b)^{2^{s}})\ge s$, i.e. $2^{s}\mid b^{a}-f_{\max}(b)^{2^{s}}$.
Thus $f_{\max}$ is bonza. Moreover, for every $k\ge 2$, $f_{\max}(2^{k})=2^{k+2}=4\cdot 2^{k}$, so $\sup_{n} f_{\max}(n)/n=4$. Therefore no $c<4$ works.

Consequently, the minimal constant is $c=4$. ∎